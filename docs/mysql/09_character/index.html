<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="字符集和比较规则#字符集和比较规则简介#字符集简介#计算机中只能存储二进制数据，如何存储字符串？当然是建立字符与二进制数据的映射关系，建立这个关系要搞清楚两件事儿：
 要把哪些字符映射成二进制数据？也就是界定清楚字符范围。 怎么映射？将一个字符映射成一个二进制数据的过程也叫做编码，将一个二进制数据映射到一个字符的过程叫做解码。  字符集就是来描述某个字符范围的编码规则。
比较规则简介#怎么比较两个字符？最容易的就是直接比较这两个字符对应的二进制编码的大小。如，字符 &lsquo;a&rsquo; 的编码为 0x01，字符 &lsquo;b&rsquo; 的编码为 0x02，所 以 &lsquo;a&rsquo; 小于 &lsquo;b&rsquo;。
二进制比较规则很简单，但有时候并不符合现实需求，比如在有些场景对于英文字符不区分大小写。这时候可以这样指定比较规则：
 将两个大小写不同的字符全都转为大写或者小写。 再比较这两个字符对应的二进制数据。  但是实际生活中的字符不止英文字符一种，比如汉字有几万之多，同一种字符集可以有多种比较规则。
一些重要的字符集# ASCII 字符集，共收录 128 个字符，包括空格、标点符号、数字、大小写字母和一些不可见字符。 ISO 8859-1 字符集，共收录 256 个字符，是在 ASCII 字符集的基础上又扩充了 128 个西欧常用字符。别名 latin1。 GB2312 字符集，收录了汉字以及拉丁字母、希腊字母、日文平假名及片假名字母、俄语西里尔字母。其中收录汉字 6763 个，其他文字符号 682 个。同时这 种字符集又兼容ASCII字符集。 GBK 字符集，GBK 字符集只是在收录字符范围上对 GB2312 字符集作了扩充，编码方式上兼容 GB2312。 utf8 字符集，收录地球上能想到的所有字符，而且还在不断扩充。这种字符集兼容 ASCII 字符集，采用变长编码方式，编码一个字符需要使用 1～4 个字节。   utf8 只是 Unicode 字符集的一种编码方案，Unicode 字符集可以采用 utf8、utf16、utf32 这几种编码方案，utf8 使用 1～4 个字 节编码一个字符，utf16 使用 2 个或 4 个字节编码一个字符，utf32 使用 4 个字节编码一个字符。">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="字符集和比较规则" />
<meta property="og:description" content="字符集和比较规则#字符集和比较规则简介#字符集简介#计算机中只能存储二进制数据，如何存储字符串？当然是建立字符与二进制数据的映射关系，建立这个关系要搞清楚两件事儿：
 要把哪些字符映射成二进制数据？也就是界定清楚字符范围。 怎么映射？将一个字符映射成一个二进制数据的过程也叫做编码，将一个二进制数据映射到一个字符的过程叫做解码。  字符集就是来描述某个字符范围的编码规则。
比较规则简介#怎么比较两个字符？最容易的就是直接比较这两个字符对应的二进制编码的大小。如，字符 &lsquo;a&rsquo; 的编码为 0x01，字符 &lsquo;b&rsquo; 的编码为 0x02，所 以 &lsquo;a&rsquo; 小于 &lsquo;b&rsquo;。
二进制比较规则很简单，但有时候并不符合现实需求，比如在有些场景对于英文字符不区分大小写。这时候可以这样指定比较规则：
 将两个大小写不同的字符全都转为大写或者小写。 再比较这两个字符对应的二进制数据。  但是实际生活中的字符不止英文字符一种，比如汉字有几万之多，同一种字符集可以有多种比较规则。
一些重要的字符集# ASCII 字符集，共收录 128 个字符，包括空格、标点符号、数字、大小写字母和一些不可见字符。 ISO 8859-1 字符集，共收录 256 个字符，是在 ASCII 字符集的基础上又扩充了 128 个西欧常用字符。别名 latin1。 GB2312 字符集，收录了汉字以及拉丁字母、希腊字母、日文平假名及片假名字母、俄语西里尔字母。其中收录汉字 6763 个，其他文字符号 682 个。同时这 种字符集又兼容ASCII字符集。 GBK 字符集，GBK 字符集只是在收录字符范围上对 GB2312 字符集作了扩充，编码方式上兼容 GB2312。 utf8 字符集，收录地球上能想到的所有字符，而且还在不断扩充。这种字符集兼容 ASCII 字符集，采用变长编码方式，编码一个字符需要使用 1～4 个字节。   utf8 只是 Unicode 字符集的一种编码方案，Unicode 字符集可以采用 utf8、utf16、utf32 这几种编码方案，utf8 使用 1～4 个字 节编码一个字符，utf16 使用 2 个或 4 个字节编码一个字符，utf32 使用 4 个字节编码一个字符。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://shipengqi.github.io/db-learn/docs/mysql/09_character/" />
<meta property="article:modified_time" content="2020-06-17T17:45:14+08:00" />
<title>字符集和比较规则 | Database Learning</title>
<link rel="manifest" href="/db-learn/manifest.json">
<link rel="icon" href="/db-learn/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/db-learn/book.min.b3215d9d1d18d9051e7fbe8f256ff80e30f41d29073b86348e230d297b771002.css" integrity="sha256-syFdnR0Y2QUef76PJW/4DjD0HSkHO4Y0jiMNKXt3EAI=">
<script defer src="/db-learn/en.search.min.79aa4caec43110b70bc10866de8e262ae56a148e0d75708b1522265755d59b70.js" integrity="sha256-eapMrsQxELcLwQhm3o4mKuVqFI4NdXCLFSImV1XVm3A="></script>

<script defer src="/db-learn/sw.min.b93542a5760842e2e25439dfb3c014a53a75c12fc8ef2e8e01a71b378f98e127.js" integrity="sha256-uTVCpXYIQuLiVDnfs8AUpTp1wS/I7y6OAacbN4&#43;Y4Sc="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/db-learn"><span>Database Learning</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>






  
<ul>
  
  <li>
    <a href="https://github.com/shipengqi/db-learn" target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
  <li>
    <a href="https://shipengqi.github.io/" target="_blank" rel="noopener">
        Blog
      </a>
  </li>
  
</ul>







  <p>━━━━━━━━━━━━━━━━━━━</p>
<ul>
<li>
<p><strong>Mysql</strong></p>
<ul>
<li>
  <a href="/db-learn/docs/mysql/01_getting_started/">入门</a></li>
<li>
  <a href="/db-learn/docs/mysql/02_install/">安裝</a></li>
<li>
  <a href="/db-learn/docs/mysql/03_query/">简单查询</a></li>
<li>
  <a href="/db-learn/docs/mysql/04_advanced_query/">复杂查询</a></li>
<li>
  <a href="/db-learn/docs/mysql/05_write_operation/">写操作</a></li>
<li>
  <a href="/db-learn/docs/mysql/06_other/">其他</a></li>
<li>
  <a href="/db-learn/docs/mysql/07_architecture/">基础架构</a></li>
<li>
  <a href="/db-learn/docs/mysql/08_config/">启动选项和配置文件</a></li>
<li>
  <a href="/db-learn/docs/mysql/09_character/"class=active>字符集和比较规则</a></li>
<li>
  <a href="/db-learn/docs/mysql/10_innodb-record-store-structure/">InnoDB 记录存储结构</a></li>
<li>
  <a href="/db-learn/docs/mysql/11_innodb-page-structure/">InnoDB 数据页结构</a></li>
<li>
  <a href="/db-learn/docs/mysql/12_b-tree/">B+ 树索引</a></li>
<li>
  <a href="/db-learn/docs/mysql/13_isolation-level/">事务的隔离级别</a></li>
<li>
  <a href="/db-learn/docs/mysql/14_lock/">锁</a>
<!-- raw HTML omitted --></li>
</ul>
</li>
<li>
<p><strong>Redis</strong></p>
<ul>
<li>
  <a href="/db-learn/docs/redis/01_getting-started/">入门</a></li>
<li>
  <a href="/db-learn/docs/redis/02_redis-config/">安装配置</a></li>
<li>
  <a href="/db-learn/docs/redis/03_redis-string/">数据类型 String</a></li>
<li>
  <a href="/db-learn/docs/redis/04_redis-hash/">数据类型 Hash</a></li>
<li>
  <a href="/db-learn/docs/redis/05_redis-set/">数据类型 Set</a></li>
<li>
  <a href="/db-learn/docs/redis/06_redis-sortedset/">数据类型 SortedSet</a></li>
<li>
  <a href="/db-learn/docs/redis/07_redis-list/">数据类型 List</a></li>
<li>
  <a href="/db-learn/docs/redis/08_redis-key/">Key 操作</a></li>
<li>
  <a href="/db-learn/docs/redis/09_sds/">简单动态字符串</a></li>
<li>
  <a href="/db-learn/docs/redis/10_dict/">字典</a></li>
<li>
  <a href="/db-learn/docs/redis/11_redis-object/">对象</a></li>
<li>
  <a href="/db-learn/docs/redis/12_bitmap/">位图</a></li>
<li>
  <a href="/db-learn/docs/redis/13_distributed-lock/">分布式锁</a></li>
<li>
  <a href="/db-learn/docs/redis/14_queue/">延时队列</a></li>
<li>
  <a href="/db-learn/docs/redis/15_hyperloglog/">HyperLogLog</a></li>
<li>
  <a href="/db-learn/docs/redis/16_bloom-filter/">布隆过滤器</a></li>
<li>
  <a href="/db-learn/docs/redis/17_current-limit/">限流</a></li>
<li>
  <a href="/db-learn/docs/redis/18_geohash/">GeoHash</a></li>
<li>
  <a href="/db-learn/docs/redis/19_persistence/">持久化</a></li>
<li>
  <a href="/db-learn/docs/redis/20_pipeline/">管道</a></li>
<li>
  <a href="/db-learn/docs/redis/21_transaction/">事务</a></li>
<li>
  <a href="/db-learn/docs/redis/22_sync/">主从同步</a></li>
<li>
  <a href="/db-learn/docs/redis/23_cluster/">集群</a></li>
<li>
  <a href="/db-learn/docs/redis/24_info/">INFO 指令</a></li>
<li>
  <a href="/db-learn/docs/redis/25_redis-expire-strategy/">过期策略和内存淘汰机制</a></li>
<li>
  <a href="/db-learn/docs/redis/26_protect-redis/">保护 Redis</a></li>
<li>
  <a href="/db-learn/docs/redis/27_skills/">一些命令行技巧</a></li>
<li>
  <a href="/db-learn/docs/redis/28_slowlog/">慢查询日志</a>
<!-- raw HTML omitted --></li>
</ul>
</li>
<li>
<p><strong>MongoDB</strong></p>
<ul>
<li>
  <a href="/db-learn/docs/mongo/01_overview/">介绍</a></li>
<li>
  <a href="/db-learn/docs/mongo/02_getting-started/">入门</a></li>
<li>
  <a href="/db-learn/docs/mongo/03_advance/">使用</a></li>
<li>
  <a href="/db-learn/docs/mongo/04_migrate/">数据迁移</a>
<!-- raw HTML omitted --></li>
</ul>
</li>
</ul>










</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/db-learn/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>字符集和比较规则</strong>

  <label for="toc-control">
    
    <img src="/db-learn/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#字符集和比较规则简介">字符集和比较规则简介</a>
      <ul>
        <li><a href="#字符集简介">字符集简介</a></li>
        <li><a href="#比较规则简介">比较规则简介</a></li>
        <li><a href="#一些重要的字符集">一些重要的字符集</a></li>
      </ul>
    </li>
    <li><a href="#mysql-中支持的字符集和排序规则">MySQL 中支持的字符集和排序规则</a>
      <ul>
        <li><a href="#mysql-中的-utf8-和-utf8mb4">MySQL 中的 utf8 和 utf8mb4</a></li>
        <li><a href="#字符集的查看">字符集的查看</a></li>
        <li><a href="#比较规则查看">比较规则查看</a></li>
      </ul>
    </li>
    <li><a href="#字符集和比较规则的应用">字符集和比较规则的应用</a>
      <ul>
        <li><a href="#服务器级别">服务器级别</a></li>
        <li><a href="#数据库级别">数据库级别</a></li>
        <li><a href="#表级别">表级别</a></li>
        <li><a href="#列级别">列级别</a></li>
        <li><a href="#仅修改字符集或仅修改比较规则">仅修改字符集或仅修改比较规则</a></li>
        <li><a href="#客户端和服务器通信中的字符集">客户端和服务器通信中的字符集</a></li>
      </ul>
    </li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="字符集和比较规则">
  字符集和比较规则
  <a class="anchor" href="#%e5%ad%97%e7%ac%a6%e9%9b%86%e5%92%8c%e6%af%94%e8%be%83%e8%a7%84%e5%88%99">#</a>
</h1>
<h2 id="字符集和比较规则简介">
  字符集和比较规则简介
  <a class="anchor" href="#%e5%ad%97%e7%ac%a6%e9%9b%86%e5%92%8c%e6%af%94%e8%be%83%e8%a7%84%e5%88%99%e7%ae%80%e4%bb%8b">#</a>
</h2>
<h3 id="字符集简介">
  字符集简介
  <a class="anchor" href="#%e5%ad%97%e7%ac%a6%e9%9b%86%e7%ae%80%e4%bb%8b">#</a>
</h3>
<p>计算机中只能存储二进制数据，如何存储字符串？当然是建立字符与二进制数据的映射关系，建立这个关系要搞清楚两件事儿：</p>
<ul>
<li>要把哪些字符映射成二进制数据？也就是界定清楚字符范围。</li>
<li>怎么映射？将一个字符映射成一个二进制数据的过程也叫做<strong>编码</strong>，将一个二进制数据映射到一个字符的过程叫做<strong>解码</strong>。</li>
</ul>
<p><strong>字符集</strong>就是来描述某个字符范围的编码规则。</p>
<h3 id="比较规则简介">
  比较规则简介
  <a class="anchor" href="#%e6%af%94%e8%be%83%e8%a7%84%e5%88%99%e7%ae%80%e4%bb%8b">#</a>
</h3>
<p>怎么比较两个字符？最容易的就是直接比较这两个字符对应的二进制编码的大小。如，字符 &lsquo;a&rsquo; 的编码为 <code>0x01</code>，字符 &lsquo;b&rsquo; 的编码为 <code>0x02</code>，所
以 &lsquo;a&rsquo; 小于 &lsquo;b&rsquo;。</p>
<p>二进制比较规则很简单，但有时候并不符合现实需求，比如在有些场景对于英文字符不区分大小写。这时候可以这样指定比较规则：</p>
<ol>
<li>将两个大小写不同的字符全都转为大写或者小写。</li>
<li>再比较这两个字符对应的二进制数据。</li>
</ol>
<p>但是实际生活中的字符不止英文字符一种，比如汉字有几万之多，<strong>同一种字符集可以有多种比较规则</strong>。</p>
<h3 id="一些重要的字符集">
  一些重要的字符集
  <a class="anchor" href="#%e4%b8%80%e4%ba%9b%e9%87%8d%e8%a6%81%e7%9a%84%e5%ad%97%e7%ac%a6%e9%9b%86">#</a>
</h3>
<ul>
<li><code>ASCII</code> 字符集，共收录 128 个字符，包括空格、标点符号、数字、大小写字母和一些不可见字符。</li>
<li><code>ISO 8859-1</code> 字符集，共收录 256 个字符，是在 <code>ASCII</code> 字符集的基础上又扩充了 128 个西欧常用字符。别名 <code>latin1</code>。</li>
<li><code>GB2312</code> 字符集，收录了汉字以及拉丁字母、希腊字母、日文平假名及片假名字母、俄语西里尔字母。其中收录汉字 6763 个，其他文字符号 682 个。同时这
种字符集又兼容ASCII字符集。</li>
<li><code>GBK</code> 字符集，GBK 字符集只是在收录字符范围上对 <code>GB2312</code> 字符集作了扩充，编码方式上兼容 <code>GB2312</code>。</li>
<li><code>utf8</code> 字符集，收录地球上能想到的所有字符，而且还在不断扩充。这种字符集兼容 <code>ASCII</code> 字符集，采用变长编码方式，编码一个字符需要使用 1～4 个字节。</li>
</ul>
<blockquote>
<p><code>utf8</code> 只是 <code>Unicode</code> 字符集的一种编码方案，<code>Unicode</code> 字符集可以采用 <code>utf8</code>、<code>utf16</code>、<code>utf32</code> 这几种编码方案，<code>utf8</code> 使用 1～4 个字
节编码一个字符，<code>utf16</code> 使用 2 个或 4 个字节编码一个字符，<code>utf32</code> 使用 4 个字节编码一个字符。</p>
</blockquote>
<h2 id="mysql-中支持的字符集和排序规则">
  MySQL 中支持的字符集和排序规则
  <a class="anchor" href="#mysql-%e4%b8%ad%e6%94%af%e6%8c%81%e7%9a%84%e5%ad%97%e7%ac%a6%e9%9b%86%e5%92%8c%e6%8e%92%e5%ba%8f%e8%a7%84%e5%88%99">#</a>
</h2>
<h3 id="mysql-中的-utf8-和-utf8mb4">
  MySQL 中的 utf8 和 utf8mb4
  <a class="anchor" href="#mysql-%e4%b8%ad%e7%9a%84-utf8-%e5%92%8c-utf8mb4">#</a>
</h3>
<p><code>utf8</code> 字符集表示一个字符需要使用 1～4 个字节，但是常用的一些字符使用 1～3 个字节就可以表示了。</p>
<p>而在 MySQL 中字符集表示一个字符所用最大字节长度在某些方面会影响系统的存储和性能，所以 MySQL 定义了两个概念：</p>
<ul>
<li><code>utf8mb3</code>：阉割过的 <code>utf8</code> 字符集，只使用 1～3个 字节表示字符。</li>
<li><code>utf8mb4</code>：正宗的 <code>utf8 </code>字符集，使用 1～4 个字节表示字符。</li>
</ul>
<p><strong>在 MySQL 中 <code>utf8</code> 是 <code>utf8mb3</code> 的别名，所以之后在 MySQL 中提到 <code>utf8</code> 就意味着使用 1~3 个字节来表示一个字符，如果大家有使用 4 字节
编码一个字符的情况，比如存储一些 emoji 表情啥的，那请使用 <code>utf8mb4</code></strong>。</p>
<h3 id="字符集的查看">
  字符集的查看
  <a class="anchor" href="#%e5%ad%97%e7%ac%a6%e9%9b%86%e7%9a%84%e6%9f%a5%e7%9c%8b">#</a>
</h3>
<p>查看当前 MySQL 中支持的字符集 <code>SHOW (CHARACTER SET|CHARSET) [LIKE 匹配的模式];</code>。<code>CHARACTER SET</code> 和 <code>CHARSET</code> 是同义词，用任意
一个都可以。</p>
<h3 id="比较规则查看">
  比较规则查看
  <a class="anchor" href="#%e6%af%94%e8%be%83%e8%a7%84%e5%88%99%e6%9f%a5%e7%9c%8b">#</a>
</h3>
<p>查看 MySQL 中支持的比较规则 <code>SHOW COLLATION [LIKE 匹配的模式];</code>。</p>
<p>查看 <code>utf8</code> 字符集下的比较规则：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">mysql&gt; SHOW COLLATION LIKE <span style="color:#e6db74">&#39;utf8\_%&#39;</span>;
+--------------------------+---------+-----+---------+----------+---------+
| Collation                | Charset | Id  | Default | Compiled | Sortlen |
+--------------------------+---------+-----+---------+----------+---------+
| utf8_general_ci          | utf8    |  <span style="color:#ae81ff">33</span> | Yes     | Yes      |       <span style="color:#ae81ff">1</span> |
| utf8_bin                 | utf8    |  <span style="color:#ae81ff">83</span> |         | Yes      |       <span style="color:#ae81ff">1</span> |
| utf8_unicode_ci          | utf8    | <span style="color:#ae81ff">192</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_icelandic_ci        | utf8    | <span style="color:#ae81ff">193</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_latvian_ci          | utf8    | <span style="color:#ae81ff">194</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_romanian_ci         | utf8    | <span style="color:#ae81ff">195</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_slovenian_ci        | utf8    | <span style="color:#ae81ff">196</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_polish_ci           | utf8    | <span style="color:#ae81ff">197</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_estonian_ci         | utf8    | <span style="color:#ae81ff">198</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_spanish_ci          | utf8    | <span style="color:#ae81ff">199</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_swedish_ci          | utf8    | <span style="color:#ae81ff">200</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_turkish_ci          | utf8    | <span style="color:#ae81ff">201</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_czech_ci            | utf8    | <span style="color:#ae81ff">202</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_danish_ci           | utf8    | <span style="color:#ae81ff">203</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_lithuanian_ci       | utf8    | <span style="color:#ae81ff">204</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_slovak_ci           | utf8    | <span style="color:#ae81ff">205</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_spanish2_ci         | utf8    | <span style="color:#ae81ff">206</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_roman_ci            | utf8    | <span style="color:#ae81ff">207</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_persian_ci          | utf8    | <span style="color:#ae81ff">208</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_esperanto_ci        | utf8    | <span style="color:#ae81ff">209</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_hungarian_ci        | utf8    | <span style="color:#ae81ff">210</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_sinhala_ci          | utf8    | <span style="color:#ae81ff">211</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_german2_ci          | utf8    | <span style="color:#ae81ff">212</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_croatian_ci         | utf8    | <span style="color:#ae81ff">213</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_unicode_520_ci      | utf8    | <span style="color:#ae81ff">214</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_vietnamese_ci       | utf8    | <span style="color:#ae81ff">215</span> |         | Yes      |       <span style="color:#ae81ff">8</span> |
| utf8_general_mysql500_ci | utf8    | <span style="color:#ae81ff">223</span> |         | Yes      |       <span style="color:#ae81ff">1</span> |
+--------------------------+---------+-----+---------+----------+---------+
<span style="color:#ae81ff">27</span> rows in set <span style="color:#f92672">(</span>0.00 sec<span style="color:#f92672">)</span>
</code></pre></div><p>比较规则名称都是以 utf8 开头的，后边紧跟着该比较规则主要作用于哪种语言，名称后缀意味着该比较规则是否区分语言中的重音、大小写啥的：</p>
<ul>
<li><code>_ai</code>，accent insensitive，不区分重音</li>
<li><code>_as</code>，accent sensitive，区分重音</li>
<li><code>_ci</code>，case insensitive，不区分大小写</li>
<li><code>_cs</code>，case sensitive，区分大小写</li>
<li><code>_bin</code>，binary，以二进制方式比较</li>
</ul>
<p><strong>每种字符集对应若干种比较规则，每种字符集都有一种默认的比较规则</strong>（<code>Default</code> 列的值为 <code>YES</code> 的）。</p>
<h2 id="字符集和比较规则的应用">
  字符集和比较规则的应用
  <a class="anchor" href="#%e5%ad%97%e7%ac%a6%e9%9b%86%e5%92%8c%e6%af%94%e8%be%83%e8%a7%84%e5%88%99%e7%9a%84%e5%ba%94%e7%94%a8">#</a>
</h2>
<p>MySQL 有 4 个级别的字符集和比较规则，分别是：</p>
<ul>
<li>服务器级别</li>
<li>数据库级别</li>
<li>表级别</li>
<li>列级别</li>
</ul>
<h3 id="服务器级别">
  服务器级别
  <a class="anchor" href="#%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%ba%a7%e5%88%ab">#</a>
</h3>
<p>MySQL 提供了两个系统变量来表示服务器级别的字符集和比较规则：</p>
<ul>
<li><code>character_set_server	</code>服务器级别的字符集</li>
<li><code>collation_server</code> 服务器级别的比较规则</li>
</ul>
<h3 id="数据库级别">
  数据库级别
  <a class="anchor" href="#%e6%95%b0%e6%8d%ae%e5%ba%93%e7%ba%a7%e5%88%ab">#</a>
</h3>
<p>创建和修改数据库的时候可以指定该数据库的字符集和比较规则，具体语法如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">DATABASE</span> <span style="color:#960050;background-color:#1e0010">数据库名</span>
    [[<span style="color:#66d9ef">DEFAULT</span>] CHARACTER <span style="color:#66d9ef">SET</span> <span style="color:#960050;background-color:#1e0010">字符集名称</span>]
    [[<span style="color:#66d9ef">DEFAULT</span>] <span style="color:#66d9ef">COLLATE</span> <span style="color:#960050;background-color:#1e0010">比较规则名称</span>];

<span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">DATABASE</span> <span style="color:#960050;background-color:#1e0010">数据库名</span>
    [[<span style="color:#66d9ef">DEFAULT</span>] CHARACTER <span style="color:#66d9ef">SET</span> <span style="color:#960050;background-color:#1e0010">字符集名称</span>]
    [[<span style="color:#66d9ef">DEFAULT</span>] <span style="color:#66d9ef">COLLATE</span> <span style="color:#960050;background-color:#1e0010">比较规则名称</span>];
</code></pre></div><p><code>DEFAULT</code>可以省略，并不影响语句的语义。比如新创建一个名叫 <code>charset_demo_db</code> 的数据库，在创建的时候指定它使用的字符集为 <code>gb2312</code>，比较规
则为 <code>gb2312_chinese_ci</code>：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">DATABASE</span> charset_demo_db
    <span style="color:#f92672">-&gt;</span> CHARACTER <span style="color:#66d9ef">SET</span> gb2312
    <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">COLLATE</span> gb2312_chinese_ci;
Query OK, <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">row</span> affected (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">01</span> sec)
</code></pre></div><p>如果想查看当前数据库使用的字符集和比较规则，可以查看下面两个系统变量的值（前提是使用 <code>USE</code> 语句选择当前默认数据库，如果没有默认数据库，
则变量与相应的服务器级系统变量具有相同的值）：</p>
<ul>
<li><code>character_set_database</code> 当前数据库的字符集</li>
<li><code>collation_database</code> 当前数据库的比较规则</li>
</ul>
<blockquote>
<p><code>character_set_database</code> 和 <code>collation_database</code> 这两个系统变量是<strong>只读</strong>的，不能通过修改这两个变量的值而改变当前数据库的字
符集和比较规则。</p>
</blockquote>
<p>如果数据库的创建或修改语句中<strong>没有指定字符集和比较规则</strong>，那么会<strong>使用服务器级别的字符集和比较规则</strong>。</p>
<h3 id="表级别">
  表级别
  <a class="anchor" href="#%e8%a1%a8%e7%ba%a7%e5%88%ab">#</a>
</h3>
<p>可以在创建和修改表的时候指定表的字符集和比较规则，语法如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#960050;background-color:#1e0010">表名</span> (<span style="color:#960050;background-color:#1e0010">列的信息</span>)
    [[<span style="color:#66d9ef">DEFAULT</span>] CHARACTER <span style="color:#66d9ef">SET</span> <span style="color:#960050;background-color:#1e0010">字符集名称</span>]
    [<span style="color:#66d9ef">COLLATE</span> <span style="color:#960050;background-color:#1e0010">比较规则名称</span>]]

<span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#960050;background-color:#1e0010">表名</span>
    [[<span style="color:#66d9ef">DEFAULT</span>] CHARACTER <span style="color:#66d9ef">SET</span> <span style="color:#960050;background-color:#1e0010">字符集名称</span>]
    [<span style="color:#66d9ef">COLLATE</span> <span style="color:#960050;background-color:#1e0010">比较规则名称</span>]
</code></pre></div><p>比如创建一个名为 <code>t</code> 的表，并指定这个表的字符集和比较规则：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> t(
    <span style="color:#f92672">-&gt;</span>     col VARCHAR(<span style="color:#ae81ff">10</span>)
    <span style="color:#f92672">-&gt;</span> ) CHARACTER <span style="color:#66d9ef">SET</span> utf8 <span style="color:#66d9ef">COLLATE</span> utf8_general_ci;
Query OK, <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">rows</span> affected (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">03</span> sec)
</code></pre></div><p>如果表的创建或修改语句中<strong>没有指定字符集和比较规则</strong>，那么会<strong>使用该表所在数据库的字符集和比较规则</strong>。</p>
<h3 id="列级别">
  列级别
  <a class="anchor" href="#%e5%88%97%e7%ba%a7%e5%88%ab">#</a>
</h3>
<p><strong>同一个表中的不同的列也可以有不同的字符集和比较规则</strong>。在创建和修改列定义的时候可以指定该列的字符集和比较规则，语法如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#960050;background-color:#1e0010">表名</span>(
    <span style="color:#960050;background-color:#1e0010">列名</span> <span style="color:#960050;background-color:#1e0010">字符串类型</span> [CHARACTER <span style="color:#66d9ef">SET</span> <span style="color:#960050;background-color:#1e0010">字符集名称</span>] [<span style="color:#66d9ef">COLLATE</span> <span style="color:#960050;background-color:#1e0010">比较规则名称</span>],
    <span style="color:#960050;background-color:#1e0010">其他列</span>...
);

<span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">MODIFY</span> <span style="color:#960050;background-color:#1e0010">列名</span> <span style="color:#960050;background-color:#1e0010">字符串类型</span> [CHARACTER <span style="color:#66d9ef">SET</span> <span style="color:#960050;background-color:#1e0010">字符集名称</span>] [<span style="color:#66d9ef">COLLATE</span> <span style="color:#960050;background-color:#1e0010">比较规则名称</span>];
</code></pre></div><p>比如我们修改一下表 <code>t</code> 中列 <code>col</code> 的字符集和比较规则可以这么写：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> t <span style="color:#66d9ef">MODIFY</span> col VARCHAR(<span style="color:#ae81ff">10</span>) CHARACTER <span style="color:#66d9ef">SET</span> gbk <span style="color:#66d9ef">COLLATE</span> gbk_chinese_ci;
Query OK, <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">rows</span> affected (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">04</span> sec)
Records: <span style="color:#ae81ff">0</span>  Duplicates: <span style="color:#ae81ff">0</span>  Warnings: <span style="color:#ae81ff">0</span>
</code></pre></div><p>如果表的创建或修改语句中<strong>没有指定该列的字符集和比较规则</strong>，那么会<strong>使用该列所在表的字符集和比较规则</strong>。</p>
<blockquote>
<p>在转换列的字符集时需要注意，如果转换前列中存储的数据不能用转换后的字符集进行表示会发生错误。比方说原先列使用的字
符集是 <code>utf8</code>，列中存储了一些汉字，现在把列的字符集转换为 <code>ascii</code> 的话就会出错，因为 <code>ascii</code> 字符集并不能表示汉字字符。</p>
</blockquote>
<h3 id="仅修改字符集或仅修改比较规则">
  仅修改字符集或仅修改比较规则
  <a class="anchor" href="#%e4%bb%85%e4%bf%ae%e6%94%b9%e5%ad%97%e7%ac%a6%e9%9b%86%e6%88%96%e4%bb%85%e4%bf%ae%e6%94%b9%e6%af%94%e8%be%83%e8%a7%84%e5%88%99">#</a>
</h3>
<p>由于字符集和比较规则是互相有联系的，如果只修改了字符集，比较规则也会跟着变化，如果只修改了比较规则，字符集也会跟着变化，具体规则如下：</p>
<ul>
<li>只修改字符集，则比较规则将变为修改后的字符集默认的比较规则。</li>
<li>只修改比较规则，则字符集将变为修改后的比较规则对应的字符集。</li>
</ul>
<p><strong>不论哪个级别的字符集和比较规则，这两条规则都适用</strong>。</p>
<h3 id="客户端和服务器通信中的字符集">
  客户端和服务器通信中的字符集
  <a class="anchor" href="#%e5%ae%a2%e6%88%b7%e7%ab%af%e5%92%8c%e6%9c%8d%e5%8a%a1%e5%99%a8%e9%80%9a%e4%bf%a1%e4%b8%ad%e7%9a%84%e5%ad%97%e7%ac%a6%e9%9b%86">#</a>
</h3>
<h4 id="编码和解码使用的字符集不一致的后果">
  编码和解码使用的字符集不一致的后果
  <a class="anchor" href="#%e7%bc%96%e7%a0%81%e5%92%8c%e8%a7%a3%e7%a0%81%e4%bd%bf%e7%94%a8%e7%9a%84%e5%ad%97%e7%ac%a6%e9%9b%86%e4%b8%8d%e4%b8%80%e8%87%b4%e7%9a%84%e5%90%8e%e6%9e%9c">#</a>
</h4>
<p>比如字符 <code>'我'</code> 在 <code>utf8</code> 字符集编码下的字节串长这样：<code>0xE68891</code>，把这个字节串发送到另一个程序里，另一个程序用不同的字符集去解码这个字节串，
假设使用的 是 <code>gbk</code> 字符集来解释这串字节，解码过程就是这样的：</p>
<ol>
<li>首先看第一个字节 <code>0xE6</code>，它的值大于 <code>0x7F</code>（十进制：127，一个字节表示的最大的有符号整数），说明是两字节编码，继续读一字节后是 <code>0xE688</code>，然
后从 <code>gbk</code> 编码表中查找字节为 <code>0xE688</code> 对应的字符，发现是字符<code>'鎴'</code>。</li>
<li>继续读一个字节 <code>0x91</code>，它的值也大于 <code>0x7F</code>，再往后读一个字节发现木有了，所以这是半个字符。</li>
<li>所以 <code>0xE68891</code> 被 <code>gbk</code> 字符集解释成一个字符 <code>'鎴'</code> 和半个字符。</li>
</ol>
<h4 id="字符集转换">
  字符集转换
  <a class="anchor" href="#%e5%ad%97%e7%ac%a6%e9%9b%86%e8%bd%ac%e6%8d%a2">#</a>
</h4>
<p>如果接收 <code>0xE68891</code> 这个字节串的程序按照 <code>utf8</code> 字符集进行解码，然后又把它按照 <code>gbk</code> 字符集进行编码，最后编码后的字节串就是 <code>0xCED2</code>，把这
个过程称为<strong>字符集的转换</strong>，也就是字符串 <code>'我'</code> 从 <code>utf8</code> 字符集转换为 <code>gbk</code> 字符集。</p>
<h4 id="mysql-中字符集的转换">
  MySQL 中字符集的转换
  <a class="anchor" href="#mysql-%e4%b8%ad%e5%ad%97%e7%ac%a6%e9%9b%86%e7%9a%84%e8%bd%ac%e6%8d%a2">#</a>
</h4>
<p>从客户端发往服务端的请求本质上就是一个字符串，服务端向客户端返回的结果本质上也是一个字符串，而字符串其实是使用某种字符集编码的二进制数据。这个字符
串可不是使用一种字符集的编码方式一条道走到黑的，从发送请求到返回结果这个过程中伴随着多次字符集的转换，在这个过程中会用到 3 个系统变量：</p>
<ul>
<li><code>character_set_client</code> 服务端解码请求时使用的字符集</li>
<li><code>character_set_connection</code> 服务端处理请求时会把请求字符串从 <code>character_set_client</code> 转为 <code>character_set_connection</code></li>
<li><code>character_set_results</code> 服务端向客户端返回数据时使用的字符集</li>
</ul>
<p>这三个系统变量的值可能默认都是 <code>utf-8</code>。为了体现出字符集在请求处理过程中的变化，这里特意修改一个系统变量的值：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">mysql&gt; set character_set_connection <span style="color:#f92672">=</span> gbk;
Query OK, <span style="color:#ae81ff">0</span> rows affected <span style="color:#f92672">(</span>0.00 sec<span style="color:#f92672">)</span>
</code></pre></div><p>所以现在系统变量 <code>character_set_clien</code> t和 <code>character_set_results</code> 的值还是 <code>utf8</code>，而 <code>character_set_connection</code> 的值为 <code>gbk</code>。
现在假设客户端发送的请求是下边这个字符串：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> t <span style="color:#66d9ef">WHERE</span> s <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;我&#39;</span>;
</code></pre></div><p>分析字符 <code>'我'</code> 在这个过程中字符集的转换。请求从发送到结果返回过程中字符集的变化：</p>
<ol>
<li>客户端发送请求所使用的字符集
一般情况下客户端所使用的字符集和当前操作系统一致，不同操作系统使用的字符集可能不一样，如下：</li>
</ol>
<ul>
<li>类 <code>Unix</code> 系统使用的是 <code>utf8</code></li>
<li><code>Windows</code> 使用的是 <code>gbk</code></li>
</ul>
<p>例如在使用的 <code>macOS</code> 操作系统时，客户端使用的就是 <code>utf8</code> 字符集。所以字符 <code>'我'</code> 在发送给服务端的请求中的字节形式就是：<code>0xE68891</code></p>
<ol start="2">
<li>
<p>服务端接收到客户端发送来的请求其实是一串二进制的字节，它会认为这串字节采用的字符集是 <code>character_set_client</code>，然后把这串字节转换
为 <code>character_set_connection</code> 字符集编码的字符。由于计算机上 <code>chacharacter_set_client</code> 的值是 <code>utf8</code>，首先会按照 <code>utf8</code> 字符集
对字节串 <code>0xE68891</code> 进行解码，得到的字符串就是 <code>'我'</code>，然后按照 <code>character_set_connection</code>代表的字符集，也就是 <code>gbk</code> 进行编码，得
到的结果就是字节串 <code>0xCED2</code>。</p>
</li>
<li>
<p>因为表 <code>t</code> 的列 <code>col</code> 采用的是 <code>gbk</code> 字符集，与 <code>character_set_connection</code> 一致，所以直接到列中找字节值为 <code>0xCED2</code> 的记录，最后找
到了一条记录。</p>
</li>
</ol>
<p><strong>如果某个列使用的字符集和 <code>character_set_connection</code> 代表的字符集不一致的话，还需要进行一次字符集转换</strong>。</p>
<ol start="4">
<li>
<p>上一步骤找到的记录中的 <code>col</code> 列其实是一个字节串 <code>0xCED2</code>，<code>col</code> 列是采用 <code>gbk</code> 进行编码的，所以首先会将这个字节串使用 <code>gbk</code> 进行解码，
得到字符串<code>'我'</code>，然后再把这个字符串使用 <code>character_set_results</code> 代表的字符集，也就是 <code>utf8</code> 进行编码，得到了新的字节串：<code>0xE68891</code>，然
后发送给客户端。</p>
</li>
<li>
<p>由于客户端是用的字符集是 <code>utf8</code>，所以可以顺利的将 <code>0xE68891</code> 解释成字符我，从而显示到我们的显示器上，所以我们人类也读懂了返回的结果。</p>
</li>
</ol>
<p>几点需要注意的地方：</p>
<ul>
<li>假设你的客户端采用的字符集和 <code>character_set_client</code> 不一样的话，这就会出现意想不到的情况。</li>
<li>假设你的客户端采用的字符集和 <code>character_set_results</code> 不一样的话，这就可能会出现客户端无法解码结果集的情况</li>
</ul>
<blockquote>
<p><strong>通常都把 <code>character_set_client</code>、<code>character_set_connection</code>、<code>character_set_results</code> 这三个系统变量设置成和客户端使用的
字符集一致的情况，这样减少了很多无谓的字符集转换</strong>。</p>
</blockquote>
<p>MySQL 提供了一条非常简便的语句:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SET</span> <span style="color:#66d9ef">NAMES</span> <span style="color:#960050;background-color:#1e0010">字符集名</span>;
</code></pre></div><p>效果与下面的三条语句的执行效果一样：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SET</span> character_set_client <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">字符集名</span>;
<span style="color:#66d9ef">SET</span> character_set_connection <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">字符集名</span>;
<span style="color:#66d9ef">SET</span> character_set_results <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">字符集名</span>;
</code></pre></div><p>也可以写到配置文件里：</p>
<pre><code>[client]
default-character-set=utf8
</code></pre><blockquote>
<p>如果你使用的是 Windows 系统，那应该设置成 <code>gbk</code>。</p>
</blockquote>
<h4 id="比较规则的应用">
  比较规则的应用
  <a class="anchor" href="#%e6%af%94%e8%be%83%e8%a7%84%e5%88%99%e7%9a%84%e5%ba%94%e7%94%a8">#</a>
</h4>
<p><strong>比较规则</strong>的作用通常体现在<strong>比较字符串大小的表达式</strong>以及<strong>对某个字符串列进行排序</strong>中，所以有时候也称为<strong>排序规则</strong>。比方说表 <code>t</code> 的列 <code>col</code> 使
用的字符集是<code>gbk</code>，使用的比较规则是 <code>gbk_chinese_ci</code>，我们向里边插入几条记录：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">mysql&gt; INSERT INTO t<span style="color:#f92672">(</span>col<span style="color:#f92672">)</span> VALUES<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;a&#39;</span><span style="color:#f92672">)</span>, <span style="color:#f92672">(</span><span style="color:#e6db74">&#39;b&#39;</span><span style="color:#f92672">)</span>, <span style="color:#f92672">(</span><span style="color:#e6db74">&#39;A&#39;</span><span style="color:#f92672">)</span>, <span style="color:#f92672">(</span><span style="color:#e6db74">&#39;B&#39;</span><span style="color:#f92672">)</span>;
Query OK, <span style="color:#ae81ff">4</span> rows affected <span style="color:#f92672">(</span>0.00 sec<span style="color:#f92672">)</span>
Records: <span style="color:#ae81ff">4</span>  Duplicates: <span style="color:#ae81ff">0</span>  Warnings: <span style="color:#ae81ff">0</span>

mysql&gt;
</code></pre></div><p>查询的时候按照 <code>col</code> 列排序一下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">mysql&gt; SELECT * FROM t ORDER BY col;
+------+
| col  |
+------+
| a    |
| A    |
| b    |
| B    |
| 我   |
+------+
<span style="color:#ae81ff">5</span> rows in set <span style="color:#f92672">(</span>0.00 sec<span style="color:#f92672">)</span>
</code></pre></div><p>可以看到在默认的比较规则 <code>gbk_chinese_ci</code> 中是不区分大小写的，我们现在把列 <code>col</code> 的比较规则修改为 <code>gbk_bin</code>：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">mysql&gt; ALTER TABLE t MODIFY col VARCHAR<span style="color:#f92672">(</span>10<span style="color:#f92672">)</span> COLLATE gbk_bin;
Query OK, <span style="color:#ae81ff">5</span> rows affected <span style="color:#f92672">(</span>0.02 sec<span style="color:#f92672">)</span>
Records: <span style="color:#ae81ff">5</span>  Duplicates: <span style="color:#ae81ff">0</span>  Warnings: <span style="color:#ae81ff">0</span>
</code></pre></div><p><code>gbk_bin</code>是直接比较字符的编码，所以是区分大小写的，我们再看一下排序后的查询结果：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">mysql&gt; SELECT * FROM t ORDER BY col;
+------+
| s    |
+------+
| A    |
| B    |
| a    |
| b    |
| 我   |
+------+
<span style="color:#ae81ff">5</span> rows in set <span style="color:#f92672">(</span>0.00 sec<span style="color:#f92672">)</span>

mysql&gt;
</code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">



  <div><a class="flex align-center" href="https://github.com/shipengqi/db-learn/commit/391abafbb55e9e09f274b9823c6b411133314e4f" title='Last modified by shipengqi | June 17, 2020' target="_blank" rel="noopener">
      <img src="/db-learn/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>June 17, 2020</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/shipengqi/db-learn/edit/master/content//docs/mysql/09_character.md" target="_blank" rel="noopener">
      <img src="/db-learn/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>

</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#字符集和比较规则简介">字符集和比较规则简介</a>
      <ul>
        <li><a href="#字符集简介">字符集简介</a></li>
        <li><a href="#比较规则简介">比较规则简介</a></li>
        <li><a href="#一些重要的字符集">一些重要的字符集</a></li>
      </ul>
    </li>
    <li><a href="#mysql-中支持的字符集和排序规则">MySQL 中支持的字符集和排序规则</a>
      <ul>
        <li><a href="#mysql-中的-utf8-和-utf8mb4">MySQL 中的 utf8 和 utf8mb4</a></li>
        <li><a href="#字符集的查看">字符集的查看</a></li>
        <li><a href="#比较规则查看">比较规则查看</a></li>
      </ul>
    </li>
    <li><a href="#字符集和比较规则的应用">字符集和比较规则的应用</a>
      <ul>
        <li><a href="#服务器级别">服务器级别</a></li>
        <li><a href="#数据库级别">数据库级别</a></li>
        <li><a href="#表级别">表级别</a></li>
        <li><a href="#列级别">列级别</a></li>
        <li><a href="#仅修改字符集或仅修改比较规则">仅修改字符集或仅修改比较规则</a></li>
        <li><a href="#客户端和服务器通信中的字符集">客户端和服务器通信中的字符集</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












