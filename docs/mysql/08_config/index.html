<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="MySQL 服务端设置项一般都有各自的默认值，例如，服务端客户端做大连接数默认是 151，默认存储引擎是 InnoDB，这些选项叫做启动选项，可以在 程序启动的时候去修改。
不论是服务端相关的程序（mysqld、mysqld_safe）还是客户端相关的程序（mysql、mysqladmin），在启动的时候基本都可以指定启动参数。 这些启动参数可以放在命令行中指定，也可以把它们放在配置文件中指定。
在命令行上使用选项# --skip-networking 选项禁止各客户端使用 TCP/IP 网络进行通信。（也可以使用 skip_networking，当选项名由多个单词构成时，可以 - 连接， 也可以 _ 连接） --default-storage-engine=&lt;engine&gt; 改变默认存储引擎。  示例：
mysqld --default-storage-engine=MyISAM 查看更多启动选项：
mysqld --verbose --help mysqld_safe --help 配置文件中使用选项#在配置文件中使用选项，就不需要每次都在命令行中添加参数。
配置文件的路径#Windows 操作系统的配置文件#MySQL 会按照下列路径来寻找配置文件：
   路径 描述     %WINDIR%\my.ini， %WINDIR%\my.cnf    C:\my.ini， C:\my.cnf    BASEDIR\my.ini， BASEDIR\my.cnf    defaults-extra-file 命令行指定的额外配置文件路径   %APPDATA%\MySQL\.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="启动选项和配置文件" />
<meta property="og:description" content="MySQL 服务端设置项一般都有各自的默认值，例如，服务端客户端做大连接数默认是 151，默认存储引擎是 InnoDB，这些选项叫做启动选项，可以在 程序启动的时候去修改。
不论是服务端相关的程序（mysqld、mysqld_safe）还是客户端相关的程序（mysql、mysqladmin），在启动的时候基本都可以指定启动参数。 这些启动参数可以放在命令行中指定，也可以把它们放在配置文件中指定。
在命令行上使用选项# --skip-networking 选项禁止各客户端使用 TCP/IP 网络进行通信。（也可以使用 skip_networking，当选项名由多个单词构成时，可以 - 连接， 也可以 _ 连接） --default-storage-engine=&lt;engine&gt; 改变默认存储引擎。  示例：
mysqld --default-storage-engine=MyISAM 查看更多启动选项：
mysqld --verbose --help mysqld_safe --help 配置文件中使用选项#在配置文件中使用选项，就不需要每次都在命令行中添加参数。
配置文件的路径#Windows 操作系统的配置文件#MySQL 会按照下列路径来寻找配置文件：
   路径 描述     %WINDIR%\my.ini， %WINDIR%\my.cnf    C:\my.ini， C:\my.cnf    BASEDIR\my.ini， BASEDIR\my.cnf    defaults-extra-file 命令行指定的额外配置文件路径   %APPDATA%\MySQL\." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://shipengqi.github.io/db-learn/docs/mysql/08_config/" />
<meta property="article:modified_time" content="2020-06-17T17:45:14+08:00" />
<title>启动选项和配置文件 | Database Learning</title>
<link rel="manifest" href="/db-learn/manifest.json">
<link rel="icon" href="/db-learn/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/db-learn/book.min.b3215d9d1d18d9051e7fbe8f256ff80e30f41d29073b86348e230d297b771002.css" integrity="sha256-syFdnR0Y2QUef76PJW/4DjD0HSkHO4Y0jiMNKXt3EAI=">
<script defer src="/db-learn/en.search.min.79aa4caec43110b70bc10866de8e262ae56a148e0d75708b1522265755d59b70.js" integrity="sha256-eapMrsQxELcLwQhm3o4mKuVqFI4NdXCLFSImV1XVm3A="></script>

<script defer src="/db-learn/sw.min.b93542a5760842e2e25439dfb3c014a53a75c12fc8ef2e8e01a71b378f98e127.js" integrity="sha256-uTVCpXYIQuLiVDnfs8AUpTp1wS/I7y6OAacbN4&#43;Y4Sc="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/db-learn"><span>Database Learning</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>






  
<ul>
  
  <li>
    <a href="https://github.com/shipengqi/db-learn" target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
  <li>
    <a href="https://shipengqi.github.io/" target="_blank" rel="noopener">
        Blog
      </a>
  </li>
  
</ul>







  <p>━━━━━━━━━━━━━━━━━━━</p>
<ul>
<li>
<p><strong>Mysql</strong></p>
<ul>
<li>
  <a href="/db-learn/docs/mysql/01_getting_started/">入门</a></li>
<li>
  <a href="/db-learn/docs/mysql/02_install/">安裝</a></li>
<li>
  <a href="/db-learn/docs/mysql/03_query/">简单查询</a></li>
<li>
  <a href="/db-learn/docs/mysql/04_advanced_query/">复杂查询</a></li>
<li>
  <a href="/db-learn/docs/mysql/05_write_operation/">写操作</a></li>
<li>
  <a href="/db-learn/docs/mysql/06_other/">其他</a></li>
<li>
  <a href="/db-learn/docs/mysql/07_architecture/">基础架构</a></li>
<li>
  <a href="/db-learn/docs/mysql/08_config/"class=active>启动选项和配置文件</a></li>
<li>
  <a href="/db-learn/docs/mysql/09_character/">字符集和比较规则</a></li>
<li>
  <a href="/db-learn/docs/mysql/10_innodb-record-store-structure/">InnoDB 记录存储结构</a></li>
<li>
  <a href="/db-learn/docs/mysql/11_innodb-page-structure/">InnoDB 数据页结构</a></li>
<li>
  <a href="/db-learn/docs/mysql/12_b-tree/">B+ 树索引</a></li>
<li>
  <a href="/db-learn/docs/mysql/13_isolation-level/">事务的隔离级别</a></li>
<li>
  <a href="/db-learn/docs/mysql/14_lock/">锁</a>
<!-- raw HTML omitted --></li>
</ul>
</li>
<li>
<p><strong>Redis</strong></p>
<ul>
<li>
  <a href="/db-learn/docs/redis/01_getting-started/">入门</a></li>
<li>
  <a href="/db-learn/docs/redis/02_redis-config/">安装配置</a></li>
<li>
  <a href="/db-learn/docs/redis/03_redis-string/">数据类型 String</a></li>
<li>
  <a href="/db-learn/docs/redis/04_redis-hash/">数据类型 Hash</a></li>
<li>
  <a href="/db-learn/docs/redis/05_redis-set/">数据类型 Set</a></li>
<li>
  <a href="/db-learn/docs/redis/06_redis-sortedset/">数据类型 SortedSet</a></li>
<li>
  <a href="/db-learn/docs/redis/07_redis-list/">数据类型 List</a></li>
<li>
  <a href="/db-learn/docs/redis/08_redis-key/">Key 操作</a></li>
<li>
  <a href="/db-learn/docs/redis/09_sds/">简单动态字符串</a></li>
<li>
  <a href="/db-learn/docs/redis/10_dict/">字典</a></li>
<li>
  <a href="/db-learn/docs/redis/11_redis-object/">对象</a></li>
<li>
  <a href="/db-learn/docs/redis/12_bitmap/">位图</a></li>
<li>
  <a href="/db-learn/docs/redis/13_distributed-lock/">分布式锁</a></li>
<li>
  <a href="/db-learn/docs/redis/14_queue/">延时队列</a></li>
<li>
  <a href="/db-learn/docs/redis/15_hyperloglog/">HyperLogLog</a></li>
<li>
  <a href="/db-learn/docs/redis/16_bloom-filter/">布隆过滤器</a></li>
<li>
  <a href="/db-learn/docs/redis/17_current-limit/">限流</a></li>
<li>
  <a href="/db-learn/docs/redis/18_geohash/">GeoHash</a></li>
<li>
  <a href="/db-learn/docs/redis/19_persistence/">持久化</a></li>
<li>
  <a href="/db-learn/docs/redis/20_pipeline/">管道</a></li>
<li>
  <a href="/db-learn/docs/redis/21_transaction/">事务</a></li>
<li>
  <a href="/db-learn/docs/redis/22_sync/">主从同步</a></li>
<li>
  <a href="/db-learn/docs/redis/23_cluster/">集群</a></li>
<li>
  <a href="/db-learn/docs/redis/24_info/">INFO 指令</a></li>
<li>
  <a href="/db-learn/docs/redis/25_redis-expire-strategy/">过期策略和内存淘汰机制</a></li>
<li>
  <a href="/db-learn/docs/redis/26_protect-redis/">保护 Redis</a></li>
<li>
  <a href="/db-learn/docs/redis/27_skills/">一些命令行技巧</a></li>
<li>
  <a href="/db-learn/docs/redis/28_slowlog/">慢查询日志</a>
<!-- raw HTML omitted --></li>
</ul>
</li>
<li>
<p><strong>MongoDB</strong></p>
<ul>
<li>
  <a href="/db-learn/docs/mongo/01_overview/">介绍</a></li>
<li>
  <a href="/db-learn/docs/mongo/02_getting-started/">入门</a></li>
<li>
  <a href="/db-learn/docs/mongo/03_advance/">使用</a></li>
<li>
  <a href="/db-learn/docs/mongo/04_migrate/">数据迁移</a>
<!-- raw HTML omitted --></li>
</ul>
</li>
</ul>










</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/db-learn/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>启动选项和配置文件</strong>

  <label for="toc-control">
    
    <img src="/db-learn/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#在命令行上使用选项">在命令行上使用选项</a></li>
    <li><a href="#配置文件中使用选项">配置文件中使用选项</a>
      <ul>
        <li><a href="#配置文件的路径">配置文件的路径</a></li>
        <li><a href="#配置文件的内容">配置文件的内容</a></li>
      </ul>
    </li>
    <li><a href="#系统变量">系统变量</a>
      <ul>
        <li><a href="#设置系统变量">设置系统变量</a></li>
      </ul>
    </li>
    <li><a href="#状态变量">状态变量</a></li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><p>MySQL 服务端设置项一般都有各自的默认值，例如，服务端客户端做大连接数默认是 <code>151</code>，默认存储引擎是 <code>InnoDB</code>，这些选项叫做<strong>启动选项</strong>，可以在
程序启动的时候去修改。</p>
<p>不论是服务端相关的程序（<code>mysqld</code>、<code>mysqld_safe</code>）还是客户端相关的程序（<code>mysql</code>、<code>mysqladmin</code>），在启动的时候基本都可以指定启动参数。
这些启动参数可以放在命令行中指定，也可以把它们放在配置文件中指定。</p>
<h2 id="在命令行上使用选项">
  在命令行上使用选项
  <a class="anchor" href="#%e5%9c%a8%e5%91%bd%e4%bb%a4%e8%a1%8c%e4%b8%8a%e4%bd%bf%e7%94%a8%e9%80%89%e9%a1%b9">#</a>
</h2>
<ul>
<li><code>--skip-networking</code> 选项禁止各客户端使用 TCP/IP 网络进行通信。（也可以使用 <code>skip_networking</code>，当选项名由多个单词构成时，可以 <code>-</code> 连接，
也可以 <code>_</code> 连接）</li>
<li><code>--default-storage-engine=&lt;engine&gt;</code> 改变默认存储引擎。</li>
</ul>
<p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mysqld --default-storage-engine<span style="color:#f92672">=</span>MyISAM
</code></pre></div><p>查看更多启动选项：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mysqld --verbose --help

mysqld_safe --help
</code></pre></div><h2 id="配置文件中使用选项">
  配置文件中使用选项
  <a class="anchor" href="#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e4%b8%ad%e4%bd%bf%e7%94%a8%e9%80%89%e9%a1%b9">#</a>
</h2>
<p>在配置文件中使用选项，就不需要每次都在命令行中添加参数。</p>
<h3 id="配置文件的路径">
  配置文件的路径
  <a class="anchor" href="#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e7%9a%84%e8%b7%af%e5%be%84">#</a>
</h3>
<h4 id="windows-操作系统的配置文件">
  Windows 操作系统的配置文件
  <a class="anchor" href="#windows-%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e7%9a%84%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6">#</a>
</h4>
<p>MySQL 会按照下列路径来寻找配置文件：</p>
<table>
<thead>
<tr>
<th>路径</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%WINDIR%\my.ini</code>， <code>%WINDIR%\my.cnf</code></td>
<td></td>
</tr>
<tr>
<td><code>C:\my.ini</code>， <code>C:\my.cnf</code></td>
<td></td>
</tr>
<tr>
<td><code>BASEDIR\my.ini</code>， <code>BASEDIR\my.cnf</code></td>
<td></td>
</tr>
<tr>
<td><code>defaults-extra-file</code></td>
<td>命令行指定的额外配置文件路径</td>
</tr>
<tr>
<td><code>%APPDATA%\MySQL\.mylogin.cnf</code></td>
<td>登录路径选项（仅限客户端）</td>
</tr>
</tbody>
</table>
<ul>
<li><code>%WINDIR%</code> 一般是 <code>C:\WINDOWS</code>，可以用 <code>echo %WINDIR%</code> 来查看。</li>
<li><code>BASEDIR</code> 指的是 MySQL 安装目录的路径</li>
<li><code>defaults-extra-file</code> 在命令行上可以这么写 <code>mysqld --defaults-extra-file=C:\Users\xiaohaizi\my_extra_file.txt</code></li>
<li><code>%APPDATA%</code> 表示 Windows 应用程序数据目录的值</li>
<li><code>.mylogin.cnf</code> 中只能包含一些用于启动客户端连接服务端的一些选项，包括 <code>host</code>、<code>user</code>、<code>password</code>、<code>port</code> 和 <code>socket</code>。</li>
</ul>
<h4 id="类-unix-操作系统的配置文件">
  类 UNIX 操作系统的配置文件
  <a class="anchor" href="#%e7%b1%bb-unix-%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e7%9a%84%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6">#</a>
</h4>
<p>MySQL 会按照下列路径来寻找配置文件：</p>
<table>
<thead>
<tr>
<th>路径</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/etc/my.cnf</code></td>
<td></td>
</tr>
<tr>
<td><code>/etc/mysql/my.cnf</code></td>
<td></td>
</tr>
<tr>
<td><code>SYSCONFDIR/my.cnf</code></td>
<td></td>
</tr>
<tr>
<td><code>$MYSQL_HOME/my.cnf</code></td>
<td>特定于服务器的选项（仅限服务器）</td>
</tr>
<tr>
<td><code>defaults-extra-file</code></td>
<td>命令行指定的额外配置文件路径</td>
</tr>
<tr>
<td><code>~/.my.cnf</code></td>
<td>用户特定选项</td>
</tr>
<tr>
<td><code>~/.mylogin.cnf</code></td>
<td>登录路径选项（仅限客户端）</td>
</tr>
</tbody>
</table>
<ul>
<li><code>SYSCONFDIR</code> 表示在使用 CMake 构建 MySQL 时使用 <code>SYSCONFDIR</code> 选项指定的目录。默认情况下，这是位于编译安装目录下的 <code>etc</code> 目录。</li>
<li><code>MYSQL_HOME</code> 变量的值是我们自己设置的，也可以不设置。</li>
</ul>
<h3 id="配置文件的内容">
  配置文件的内容
  <a class="anchor" href="#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e7%9a%84%e5%86%85%e5%ae%b9">#</a>
</h3>
<p>配置文件中的启动选项被划分为若干个组，每个组有一个组名，用中括号 <code>[]</code> 扩起来：</p>
<pre><code>[server]
(具体的启动选项...)

[mysqld]
(具体的启动选项...)

[mysqld_safe]
(具体的启动选项...)

[client]
(具体的启动选项...)

[mysql]
(具体的启动选项...)

[mysqladmin]
(具体的启动选项...)
</code></pre><p>每个组下边可以定义若干个启动选项，以 <code>[server]</code> 组为例：</p>
<pre><code>[server]
option1     # option1，该选项不需要选项值
option2 = value2      # option2，该选项需要选项值
...
</code></pre><p><strong>配置文件中只能使用长形式的选项</strong>。上面的文件转成命令行格式就是 <code>--option1 --option2=value2</code>。</p>
<p>不同的选项组是给不同的启动命令使用的，如 <code>[mysqld]</code> 和 <code>[mysql]</code> 组分别应用于 <code>mysqld</code> 服务端程序和 <code>mysql</code> 客户端程序。但是注意：</p>
<ul>
<li><code>[server]</code> 组下边的启动选项将作用于所有的服务器程序。</li>
<li><code>[client]</code> 组下边的启动选项将作用于所有的客户端程序。</li>
<li><code>mysqld_safe</code> 和 <code>mysql.server</code> 这两个程序在启动时都会读取 <code>[mysqld]</code> 选项组中的选项。</li>
</ul>
<h4 id="特定-mysql-版本的专用选项组">
  特定 MySQL 版本的专用选项组
  <a class="anchor" href="#%e7%89%b9%e5%ae%9a-mysql-%e7%89%88%e6%9c%ac%e7%9a%84%e4%b8%93%e7%94%a8%e9%80%89%e9%a1%b9%e7%bb%84">#</a>
</h4>
<p>可以在选项组的名称后加上特定的 MySQL 版本号，比如对于 <code>[mysqld]</code> 选项组来说，我们可以定义一个 <code>[mysqld-5.7]</code> 的选项组，它的含义
和 <code>[mysqld]</code> 一样，只不过只有版本号为 <code>5.7</code> 的 <code>mysqld</code> 程序才能使用这个选项组中的选项。</p>
<h4 id="配置文件的优先级">
  配置文件的优先级
  <a class="anchor" href="#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e7%9a%84%e4%bc%98%e5%85%88%e7%ba%a7">#</a>
</h4>
<p><strong>如果在多个配置文件中设置了相同的启动选项，那以最后一个配置文件中的为准</strong>。文件的顺序按照上面的表格从上到下的顺序。</p>
<h4 id="同一个配置文件中多个组的优先级">
  同一个配置文件中多个组的优先级
  <a class="anchor" href="#%e5%90%8c%e4%b8%80%e4%b8%aa%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e4%b8%ad%e5%a4%9a%e4%b8%aa%e7%bb%84%e7%9a%84%e4%bc%98%e5%85%88%e7%ba%a7">#</a>
</h4>
<p>比如 <code>mysqld</code> 可以访问 <code>[mysqld]</code>、<code>[server]</code> 组，如果在同一个配置文件中，比如 <code>~/.my.cnf</code>，在这些组里出现了同样的配置项，比如这样：</p>
<pre><code>[server]
default-storage-engine=InnoDB

[mysqld]
default-storage-engine=MyISAM
</code></pre><p><strong>以最后一组中的启动选项为准</strong>，比如上面的文件 <code>default-storage-engine</code> 就以 <code>[mysqld]</code> 组中的配置项为准。</p>
<h4 id="defaults-file">
  defaults-file
  <a class="anchor" href="#defaults-file">#</a>
</h4>
<p>如果不想让 MySQL 到默认的路径下搜索配置文件（就是上表中列出的那些），可以在命令行指定 <code>defaults-file</code> 选项 <code>mysqld --defaults-file=/tmp/myconfig.txt</code>。
这样，在程序启动的时候将只在 <code>/tmp/myconfig.txt</code> 路径下搜索配置文件。如果文件不存在或无法访问，则会发生错误。</p>
<p><code>defaults-file</code> 和 <code>defaults-extra-file</code> 的区别，使用 <code>defaults-extra-file</code> 可以指定额外的配置文件搜索路径。</p>
<h4 id="命令行和配置文件的优先级">
  命令行和配置文件的优先级
  <a class="anchor" href="#%e5%91%bd%e4%bb%a4%e8%a1%8c%e5%92%8c%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e7%9a%84%e4%bc%98%e5%85%88%e7%ba%a7">#</a>
</h4>
<p><strong>如果同一个启动选项既出现在命令行中，又出现在配置文件中，那么以命令行中的启动选项为准</strong>。</p>
<h2 id="系统变量">
  系统变量
  <a class="anchor" href="#%e7%b3%bb%e7%bb%9f%e5%8f%98%e9%87%8f">#</a>
</h2>
<p><code>SHOW VARIABLES [LIKE 匹配的模式];</code> 查看 MySQL 服务器程序支持的系统变量以及它们的当前值。
<strong>对于大部分系统变量来说，它们的值可以在服务端程序运行过程中进行动态修改而无需停止并重启服务器</strong>。</p>
<h3 id="设置系统变量">
  设置系统变量
  <a class="anchor" href="#%e8%ae%be%e7%bd%ae%e7%b3%bb%e7%bb%9f%e5%8f%98%e9%87%8f">#</a>
</h3>
<h4 id="通过启动选项设置">
  通过启动选项设置
  <a class="anchor" href="#%e9%80%9a%e8%bf%87%e5%90%af%e5%8a%a8%e9%80%89%e9%a1%b9%e8%ae%be%e7%bd%ae">#</a>
</h4>
<p>通过命令行添加启动选项和配置文件。例如：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">mysqld --default-storage-engine<span style="color:#f92672">=</span>MyISAM --max-connections<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>
</code></pre></div><p>或者</p>
<pre><code>[server]
default-storage-engine=MyISAM
max-connections=10
</code></pre><p><code>max-connections</code> 表示允许同时连入的客户端数量。</p>
<h4 id="服务器程序运行过程中设置">
  服务器程序运行过程中设置
  <a class="anchor" href="#%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%a8%8b%e5%ba%8f%e8%bf%90%e8%a1%8c%e8%bf%87%e7%a8%8b%e4%b8%ad%e8%ae%be%e7%bd%ae">#</a>
</h4>
<h5 id="设置不同作用范围的系统变量">
  设置不同作用范围的系统变量
  <a class="anchor" href="#%e8%ae%be%e7%bd%ae%e4%b8%8d%e5%90%8c%e4%bd%9c%e7%94%a8%e8%8c%83%e5%9b%b4%e7%9a%84%e7%b3%bb%e7%bb%9f%e5%8f%98%e9%87%8f">#</a>
</h5>
<p>了针对不同的客户端设置不同的系统变量：</p>
<ul>
<li><code>GLOBAL</code>：全局变量，影响服务器的整体操作。</li>
<li><code>SESSION</code>：会话变量，影响某个客户端连接的操作。（<code>SESSION</code> 有个别名叫 <code>LOCAL</code>）</li>
</ul>
<p><strong>通过启动选项设置的系统变量的作用范围都是 <code>GLOBAL</code> 的</strong>，也就是对所有客户端都有效的，因为在系统启动的时候还没有客户端程序连接进来。</p>
<p>通过客户端程序设置系统变量的语法：</p>
<pre><code>SET [GLOBAL|SESSION] 系统变量名 = 值;

# 或者
SET [@@(GLOBAL|SESSION).]var_name = XXX;
</code></pre><p>比如在服务端进程运行过程中把作用范围为 <code>GLOBAL</code> 的系统变量 <code>default_storage_engine</code> 的值修改为 <code>MyISAM</code>，也就是想让之后新连接到
服务器的客户端都用 <code>MyISAM</code> 作为默认的存储引擎：</p>
<pre><code>语句一：SET GLOBAL default_storage_engine = MyISAM;
语句二：SET @@GLOBAL.default_storage_engine = MyISAM;
</code></pre><p>如果只想对本客户端生效：</p>
<pre><code>语句一：SET SESSION default_storage_engine = MyISAM;
语句二：SET @@SESSION.default_storage_engine = MyISAM;
语句三：SET default_storage_engine = MyISAM;
</code></pre><p>如果在设置系统变量的语句中省略了作用范围，那么<strong>默认的作用范围就是 <code>SESSION</code></strong>。</p>
<blockquote>
<p>如果某个客户端改变了某个系统变量在 <code>GLOBAL</code> 作用范围的值，并不会影响该系统变量在当前已经连接的客户端作用范围为 <code>SESSION</code> 的值，只会影响
后续连入的客户端在作用范围为 <code>SESSION</code> 的值。</p>
</blockquote>
<p>注意：</p>
<ul>
<li>有一些系统变量只具有 <code>GLOBAL</code> 作用范围，如 <code>max_connections</code>。</li>
<li>有一些系统变量只具有 <code>SESSION</code> 作用范围，如 <code>insert_id</code>，表示在对某个包含 <code>AUTO_INCREMENT</code> 列的表进行插入时，该列初始的值。</li>
<li>有些系统变量是只读的，并不能设置值。如 version，表示当前 MySQL 的版本。</li>
</ul>
<h2 id="状态变量">
  状态变量
  <a class="anchor" href="#%e7%8a%b6%e6%80%81%e5%8f%98%e9%87%8f">#</a>
</h2>
<p>MySQL 服务器程序中维护了很多关于程序运行状态的变量，它们被称为<strong>状态变量</strong>。<strong>它们的值只能由服务器程序自己来设置</strong>。状态变量也有 <code>GLOBAL</code>
和 <code>SESSION</code> 两个作用范围的，所以查看状态变量的语句可以这么写：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SHOW</span> [<span style="color:#66d9ef">GLOBAL</span><span style="color:#f92672">|</span><span style="color:#66d9ef">SESSION</span>] STATUS [<span style="color:#66d9ef">LIKE</span> <span style="color:#960050;background-color:#1e0010">匹配的模式</span>];
</code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">



  <div><a class="flex align-center" href="https://github.com/shipengqi/db-learn/commit/391abafbb55e9e09f274b9823c6b411133314e4f" title='Last modified by shipengqi | June 17, 2020' target="_blank" rel="noopener">
      <img src="/db-learn/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>June 17, 2020</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/shipengqi/db-learn/edit/master/content//docs/mysql/08_config.md" target="_blank" rel="noopener">
      <img src="/db-learn/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>

</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#在命令行上使用选项">在命令行上使用选项</a></li>
    <li><a href="#配置文件中使用选项">配置文件中使用选项</a>
      <ul>
        <li><a href="#配置文件的路径">配置文件的路径</a></li>
        <li><a href="#配置文件的内容">配置文件的内容</a></li>
      </ul>
    </li>
    <li><a href="#系统变量">系统变量</a>
      <ul>
        <li><a href="#设置系统变量">设置系统变量</a></li>
      </ul>
    </li>
    <li><a href="#状态变量">状态变量</a></li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












