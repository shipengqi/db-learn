<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Redis 数据类型 String#String 类型是最常用，也是最简单的的一种类型，string 类型是二进制安全的。也就是说 string 可以包含任何数据。比如 jpg图片 或者 序列化的对象 。一个键最大能存储 512MB。Redis 所有的数据结构都是以唯一的 key 字符串作为名称，然后通过这个唯 一 key 值来获取相应的 value 数据。不同类型的数据结构的差异就在于 value 的结构不一样。
字符串结构使用非常广泛，不仅限于字符串，通常会使用 JSON 序列化成字符串，然后将序列化后的字符串塞进 Redis 来缓存。
键值对存取#redis&gt; set testkey hello OK redis&gt; get testkey &#34;hello&#34; //EX redis&gt; set testkey hello2 EX 60 OK redis&gt; get testkey &#34;hello2&#34; redis&gt; TTL testkey (integer) 55 //PX redis&gt; SET testkey hello3 PX 60000 OK redis&gt; GET testkey &#34;hello3&#34; redis&gt; PTTL testkey (integer) 55000 //NX redis&gt; SET testkey hello4 NX OK # 键不存在，设置成功 redis&gt; GET testkey &#34;hello4&#34; redis&gt; SET testkey hello4 NX (nil) # 键已经存在，设置失败 redis&gt; GET testkey &#34;hello4&#34; //XX redis&gt; SET testkey hello5 XX OK # 键已经存在，设置成功 redis&gt; GET testkey &#34;hello5&#34; redis&gt; SET testkey2 hello XX (nil) # 键不存在，设置失败 //EX 和 PX 同时使用，后面的选项会覆盖前面设置的选项 redis&gt; set testkey hello2 EX 10 PX 50000 OK redis&gt; TTL testkey (integer) 45000 # PX 参数覆盖了 EX redis&gt; set testkey hello2 PX 50000 EX 10 OK redis&gt; TTL testkey (integer) 8 # EX 参数覆盖了 PX SET#SET [key] [value] [EX seconds] [PX milliseconds] [NX|XX]  EX seconds - 设置过期时间，单位为秒。 PX millisecond - 设置过期时间，单位毫秒。 NX - 只在 key 不存在时才进行设置。 XX - 只在 key 存在时才进行设置。  SETEX#设置 key 值并指定过期时间，单位秒。 SETEX key second value 等同于 SET key value EX second">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Redis 数据类型 String" />
<meta property="og:description" content="Redis 数据类型 String#String 类型是最常用，也是最简单的的一种类型，string 类型是二进制安全的。也就是说 string 可以包含任何数据。比如 jpg图片 或者 序列化的对象 。一个键最大能存储 512MB。Redis 所有的数据结构都是以唯一的 key 字符串作为名称，然后通过这个唯 一 key 值来获取相应的 value 数据。不同类型的数据结构的差异就在于 value 的结构不一样。
字符串结构使用非常广泛，不仅限于字符串，通常会使用 JSON 序列化成字符串，然后将序列化后的字符串塞进 Redis 来缓存。
键值对存取#redis&gt; set testkey hello OK redis&gt; get testkey &#34;hello&#34; //EX redis&gt; set testkey hello2 EX 60 OK redis&gt; get testkey &#34;hello2&#34; redis&gt; TTL testkey (integer) 55 //PX redis&gt; SET testkey hello3 PX 60000 OK redis&gt; GET testkey &#34;hello3&#34; redis&gt; PTTL testkey (integer) 55000 //NX redis&gt; SET testkey hello4 NX OK # 键不存在，设置成功 redis&gt; GET testkey &#34;hello4&#34; redis&gt; SET testkey hello4 NX (nil) # 键已经存在，设置失败 redis&gt; GET testkey &#34;hello4&#34; //XX redis&gt; SET testkey hello5 XX OK # 键已经存在，设置成功 redis&gt; GET testkey &#34;hello5&#34; redis&gt; SET testkey2 hello XX (nil) # 键不存在，设置失败 //EX 和 PX 同时使用，后面的选项会覆盖前面设置的选项 redis&gt; set testkey hello2 EX 10 PX 50000 OK redis&gt; TTL testkey (integer) 45000 # PX 参数覆盖了 EX redis&gt; set testkey hello2 PX 50000 EX 10 OK redis&gt; TTL testkey (integer) 8 # EX 参数覆盖了 PX SET#SET [key] [value] [EX seconds] [PX milliseconds] [NX|XX]  EX seconds - 设置过期时间，单位为秒。 PX millisecond - 设置过期时间，单位毫秒。 NX - 只在 key 不存在时才进行设置。 XX - 只在 key 存在时才进行设置。  SETEX#设置 key 值并指定过期时间，单位秒。 SETEX key second value 等同于 SET key value EX second" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://shipengqi.github.io/db-learn/docs/redis/03_redis-string/" />
<meta property="article:modified_time" content="2020-06-17T17:45:14+08:00" />
<title>Redis 数据类型 String | Database Learning</title>
<link rel="manifest" href="/db-learn/manifest.json">
<link rel="icon" href="/db-learn/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/db-learn/book.min.b3215d9d1d18d9051e7fbe8f256ff80e30f41d29073b86348e230d297b771002.css" integrity="sha256-syFdnR0Y2QUef76PJW/4DjD0HSkHO4Y0jiMNKXt3EAI=">
<script defer src="/db-learn/en.search.min.79aa4caec43110b70bc10866de8e262ae56a148e0d75708b1522265755d59b70.js" integrity="sha256-eapMrsQxELcLwQhm3o4mKuVqFI4NdXCLFSImV1XVm3A="></script>

<script defer src="/db-learn/sw.min.b93542a5760842e2e25439dfb3c014a53a75c12fc8ef2e8e01a71b378f98e127.js" integrity="sha256-uTVCpXYIQuLiVDnfs8AUpTp1wS/I7y6OAacbN4&#43;Y4Sc="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/db-learn"><span>Database Learning</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>






  
<ul>
  
  <li>
    <a href="https://github.com/shipengqi/db-learn" target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
  <li>
    <a href="https://shipengqi.github.io/" target="_blank" rel="noopener">
        Blog
      </a>
  </li>
  
</ul>







  <p>━━━━━━━━━━━━━━━━━━━</p>
<ul>
<li>
<p><strong>Mysql</strong></p>
<ul>
<li>
  <a href="/db-learn/docs/mysql/01_getting_started/">入门</a></li>
<li>
  <a href="/db-learn/docs/mysql/02_install/">安裝</a></li>
<li>
  <a href="/db-learn/docs/mysql/03_query/">简单查询</a></li>
<li>
  <a href="/db-learn/docs/mysql/04_advanced_query/">复杂查询</a></li>
<li>
  <a href="/db-learn/docs/mysql/05_write_operation/">写操作</a></li>
<li>
  <a href="/db-learn/docs/mysql/06_other/">其他</a></li>
<li>
  <a href="/db-learn/docs/mysql/07_architecture/">基础架构</a></li>
<li>
  <a href="/db-learn/docs/mysql/08_config/">启动选项和配置文件</a></li>
<li>
  <a href="/db-learn/docs/mysql/09_character/">字符集和比较规则</a></li>
<li>
  <a href="/db-learn/docs/mysql/10_innodb-record-store-structure/">InnoDB 记录存储结构</a></li>
<li>
  <a href="/db-learn/docs/mysql/11_innodb-page-structure/">InnoDB 数据页结构</a></li>
<li>
  <a href="/db-learn/docs/mysql/12_b-tree/">B+ 树索引</a></li>
<li>
  <a href="/db-learn/docs/mysql/13_isolation-level/">事务的隔离级别</a></li>
<li>
  <a href="/db-learn/docs/mysql/14_lock/">锁</a>
<!-- raw HTML omitted --></li>
</ul>
</li>
<li>
<p><strong>Redis</strong></p>
<ul>
<li>
  <a href="/db-learn/docs/redis/01_getting-started/">入门</a></li>
<li>
  <a href="/db-learn/docs/redis/02_redis-config/">安装配置</a></li>
<li>
  <a href="/db-learn/docs/redis/03_redis-string/"class=active>数据类型 String</a></li>
<li>
  <a href="/db-learn/docs/redis/04_redis-hash/">数据类型 Hash</a></li>
<li>
  <a href="/db-learn/docs/redis/05_redis-set/">数据类型 Set</a></li>
<li>
  <a href="/db-learn/docs/redis/06_redis-sortedset/">数据类型 SortedSet</a></li>
<li>
  <a href="/db-learn/docs/redis/07_redis-list/">数据类型 List</a></li>
<li>
  <a href="/db-learn/docs/redis/08_redis-key/">Key 操作</a></li>
<li>
  <a href="/db-learn/docs/redis/09_sds/">简单动态字符串</a></li>
<li>
  <a href="/db-learn/docs/redis/10_dict/">字典</a></li>
<li>
  <a href="/db-learn/docs/redis/11_redis-object/">对象</a></li>
<li>
  <a href="/db-learn/docs/redis/12_bitmap/">位图</a></li>
<li>
  <a href="/db-learn/docs/redis/13_distributed-lock/">分布式锁</a></li>
<li>
  <a href="/db-learn/docs/redis/14_queue/">延时队列</a></li>
<li>
  <a href="/db-learn/docs/redis/15_hyperloglog/">HyperLogLog</a></li>
<li>
  <a href="/db-learn/docs/redis/16_bloom-filter/">布隆过滤器</a></li>
<li>
  <a href="/db-learn/docs/redis/17_current-limit/">限流</a></li>
<li>
  <a href="/db-learn/docs/redis/18_geohash/">GeoHash</a></li>
<li>
  <a href="/db-learn/docs/redis/19_persistence/">持久化</a></li>
<li>
  <a href="/db-learn/docs/redis/20_pipeline/">管道</a></li>
<li>
  <a href="/db-learn/docs/redis/21_transaction/">事务</a></li>
<li>
  <a href="/db-learn/docs/redis/22_sync/">主从同步</a></li>
<li>
  <a href="/db-learn/docs/redis/23_cluster/">集群</a></li>
<li>
  <a href="/db-learn/docs/redis/24_info/">INFO 指令</a></li>
<li>
  <a href="/db-learn/docs/redis/25_redis-expire-strategy/">过期策略和内存淘汰机制</a></li>
<li>
  <a href="/db-learn/docs/redis/26_protect-redis/">保护 Redis</a></li>
<li>
  <a href="/db-learn/docs/redis/27_skills/">一些命令行技巧</a></li>
<li>
  <a href="/db-learn/docs/redis/28_slowlog/">慢查询日志</a>
<!-- raw HTML omitted --></li>
</ul>
</li>
<li>
<p><strong>MongoDB</strong></p>
<ul>
<li>
  <a href="/db-learn/docs/mongo/01_overview/">介绍</a></li>
<li>
  <a href="/db-learn/docs/mongo/02_getting-started/">入门</a></li>
<li>
  <a href="/db-learn/docs/mongo/03_advance/">使用</a></li>
<li>
  <a href="/db-learn/docs/mongo/04_migrate/">数据迁移</a>
<!-- raw HTML omitted --></li>
</ul>
</li>
</ul>










</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/db-learn/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Redis 数据类型 String</strong>

  <label for="toc-control">
    
    <img src="/db-learn/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#键值对存取">键值对存取</a>
      <ul>
        <li><a href="#set">SET</a></li>
        <li><a href="#setex">SETEX</a></li>
        <li><a href="#psetex">PSETEX</a></li>
        <li><a href="#setnx">SETNX</a></li>
        <li><a href="#get">GET</a></li>
        <li><a href="#getset">GETSET</a></li>
      </ul>
    </li>
    <li><a href="#批量操作键值对">批量操作键值对</a>
      <ul>
        <li><a href="#mset">MSET</a></li>
        <li><a href="#mget">MGET</a></li>
      </ul>
    </li>
    <li><a href="#自增自减">自增/自减</a>
      <ul>
        <li><a href="#incr">INCR</a></li>
        <li><a href="#incrby">INCRBY</a></li>
        <li><a href="#incrbyfloat">INCRBYFLOAT</a></li>
        <li><a href="#decr">DECR</a></li>
        <li><a href="#decrby">DECRBY</a></li>
      </ul>
    </li>
    <li><a href="#append">APPEND</a></li>
    <li><a href="#strlen">STRLEN</a></li>
    <li><a href="#setrange">SETRANGE</a></li>
    <li><a href="#getrange">GETRANGE</a></li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="redis-数据类型-string">
  Redis 数据类型 String
  <a class="anchor" href="#redis-%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b-string">#</a>
</h1>
<p>String 类型是最常用，也是最简单的的一种类型，string 类型是二进制安全的。也就是说 string 可以包含任何数据。比如 <code>jpg图片</code>
或者 <code>序列化的对象</code> 。一个键<strong>最大能存储 512MB</strong>。Redis 所有的数据结构都是以唯一的 <code>key</code> 字符串作为名称，然后通过这个唯
一 <code>key</code> 值来获取相应的 <code>value</code> 数据。不同类型的数据结构的差异就在于 <code>value</code> 的结构不一样。</p>
<p>字符串结构使用非常广泛，不仅限于字符串，通常会使用 JSON 序列化成字符串，然后将序列化后的字符串塞进 Redis 来缓存。</p>
<h2 id="键值对存取">
  键值对存取
  <a class="anchor" href="#%e9%94%ae%e5%80%bc%e5%af%b9%e5%ad%98%e5%8f%96">#</a>
</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">redis&gt; set testkey hello
OK
redis&gt; get testkey
<span style="color:#e6db74">&#34;hello&#34;</span>

//EX
redis&gt; set testkey hello2 EX <span style="color:#ae81ff">60</span>
OK
redis&gt; get testkey
<span style="color:#e6db74">&#34;hello2&#34;</span>
redis&gt; TTL testkey
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">55</span>

//PX
redis&gt; SET testkey hello3 PX <span style="color:#ae81ff">60000</span>
OK
redis&gt; GET testkey
<span style="color:#e6db74">&#34;hello3&#34;</span>
redis&gt; PTTL testkey
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">55000</span>

//NX
redis&gt; SET testkey hello4 NX
OK <span style="color:#75715e"># 键不存在，设置成功</span>
redis&gt; GET testkey
<span style="color:#e6db74">&#34;hello4&#34;</span>
redis&gt; SET testkey hello4 NX
<span style="color:#f92672">(</span>nil<span style="color:#f92672">)</span> <span style="color:#75715e"># 键已经存在，设置失败</span>
redis&gt; GET testkey
<span style="color:#e6db74">&#34;hello4&#34;</span>

//XX
redis&gt; SET testkey hello5 XX
OK <span style="color:#75715e"># 键已经存在，设置成功</span>
redis&gt; GET testkey
<span style="color:#e6db74">&#34;hello5&#34;</span>
redis&gt; SET testkey2 hello XX
<span style="color:#f92672">(</span>nil<span style="color:#f92672">)</span> <span style="color:#75715e"># 键不存在，设置失败</span>

//EX 和 PX 同时使用，后面的选项会覆盖前面设置的选项
redis&gt; set testkey hello2 EX <span style="color:#ae81ff">10</span> PX <span style="color:#ae81ff">50000</span>
OK
redis&gt; TTL testkey
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">45000</span> <span style="color:#75715e"># PX 参数覆盖了 EX</span>
redis&gt; set testkey hello2 PX <span style="color:#ae81ff">50000</span> EX <span style="color:#ae81ff">10</span>
OK
redis&gt; TTL testkey
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">8</span> <span style="color:#75715e"># EX 参数覆盖了 PX</span>
</code></pre></div><h3 id="set">
  SET
  <a class="anchor" href="#set">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">SET <span style="color:#f92672">[</span>key<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>value<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>EX seconds<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>PX milliseconds<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>NX|XX<span style="color:#f92672">]</span>
</code></pre></div><ul>
<li>EX seconds - 设置过期时间，单位为秒。</li>
<li>PX millisecond - 设置过期时间，单位毫秒。</li>
<li>NX - 只在 <code>key</code> 不存在时才进行设置。</li>
<li>XX - 只在 <code>key</code> 存在时才进行设置。</li>
</ul>
<h3 id="setex">
  SETEX
  <a class="anchor" href="#setex">#</a>
</h3>
<p>设置 <code>key</code> 值并指定过期时间，单位秒。
<code>SETEX key second value</code> 等同于 <code>SET key value EX second</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">redis&gt; SETEX name <span style="color:#ae81ff">60</span> xiaoming
OK
redis&gt; GET name
<span style="color:#e6db74">&#34;10086&#34;</span>
redis&gt; TTL name
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">49</span>
</code></pre></div><h3 id="psetex">
  PSETEX
  <a class="anchor" href="#psetex">#</a>
</h3>
<p>设置 <code>key</code> 值并指定过期时间，单位毫秒。
<code>SET key value PX millisecond</code> 等同于 <code>PSETEX key millisecond value</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">redis&gt; PSETEX mykey <span style="color:#ae81ff">1000</span> <span style="color:#e6db74">&#34;Hello&#34;</span>
OK
redis&gt; PTTL mykey
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">999</span>
redis&gt; GET mykey
<span style="color:#e6db74">&#34;Hello&#34;</span>
</code></pre></div><h3 id="setnx">
  SETNX
  <a class="anchor" href="#setnx">#</a>
</h3>
<p>如果 <code>key</code> 不存在，则设置其值。设置成功，返回 <code>1</code>。失败，返回 <code>0</code>。
<code>SET key value NX</code> 等同于 <code>SETNX key value</code></p>
<h3 id="get">
  GET
  <a class="anchor" href="#get">#</a>
</h3>
<p>获取 <code>key</code> 对应的 <code>value</code>。如果 <code>key</code> 不存在，则返回 nil；如果 <code>key</code> 不是字符串类型，则返回错误。</p>
<h3 id="getset">
  GETSET
  <a class="anchor" href="#getset">#</a>
</h3>
<p>设置 <code>key</code> 的值，并返回其旧值。也就是执行了 <code>set</code> 操作和 <code>get</code> 操作。如果 <code>key</code> 不是字符串类型，则返回错误。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">redis&gt; GETSET testkey3 hello3
<span style="color:#f92672">(</span>nil<span style="color:#f92672">)</span>    <span style="color:#75715e"># 没有旧值，返回 nil</span>

redis&gt; GETSET testkey3 hello4
<span style="color:#e6db74">&#34;hello3&#34;</span>    <span style="color:#75715e"># 返回旧值</span>
</code></pre></div><h2 id="批量操作键值对">
  批量操作键值对
  <a class="anchor" href="#%e6%89%b9%e9%87%8f%e6%93%8d%e4%bd%9c%e9%94%ae%e5%80%bc%e5%af%b9">#</a>
</h2>
<p>同时设置或获取多个字符串，可以节省网络耗时开销。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; SET name xiaoming
OK
&gt; SET age <span style="color:#ae81ff">18</span>
OK
&gt; MGET name age phone
1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;xiaoming&#34;</span>
2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;18&#34;</span>
3<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>nil<span style="color:#f92672">)</span>
&gt; MSET name xiaoming age <span style="color:#ae81ff">18</span> phone <span style="color:#ae81ff">17235617235</span>
&gt; MGET name age phone
1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;xiaoming&#34;</span>
2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;18&#34;</span>
3<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;17235617235&#34;</span>
</code></pre></div><h3 id="mset">
  MSET
  <a class="anchor" href="#mset">#</a>
</h3>
<p><strong><code>MSET</code> 操作具有原子性</strong>，所有 <code>key</code> 设置要么全成功，要么全部失败。</p>
<h4 id="msetnx">
  MSETNX
  <a class="anchor" href="#msetnx">#</a>
</h4>
<p><code>MSETNX</code> 和 <code>SETNX</code> 类似，当 <code>key</code> 不存在时，才会设置其值。<code>MSETNX</code> 一样具有原子性。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 对不存在的 key 进行 MSETNX</span>
redis&gt; MSETNX rmdbs <span style="color:#e6db74">&#34;MySQL&#34;</span> nosql <span style="color:#e6db74">&#34;MongoDB&#34;</span> key-value-store <span style="color:#e6db74">&#34;redis&#34;</span>
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
redis&gt; MGET rmdbs nosql key-value-store
1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;MySQL&#34;</span>
2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;MongoDB&#34;</span>
3<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;redis&#34;</span>

<span style="color:#75715e"># MSET 的给定 key 当中有已存在的 key</span>
redis&gt; MSETNX rmdbs <span style="color:#e6db74">&#34;Sqlite&#34;</span> language <span style="color:#e6db74">&#34;python&#34;</span>
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">0</span>
<span style="color:#75715e"># 因为 MSET 是原子性操作，language 没有被设置</span>
redis&gt; EXISTS language
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">0</span>
<span style="color:#75715e"># rmdbs 也没有被修改</span>
redis&gt; GET rmdbs
<span style="color:#e6db74">&#34;MySQL&#34;</span>
</code></pre></div><h3 id="mget">
  MGET
  <a class="anchor" href="#mget">#</a>
</h3>
<p>返回一个或多个 <code>key</code> 值。</p>
<h2 id="自增自减">
  自增/自减
  <a class="anchor" href="#%e8%87%aa%e5%a2%9e%e8%87%aa%e5%87%8f">#</a>
</h2>
<p>在 Redis 中，<strong>数值也会也字符串形式存储。</strong>
<strong>注意，执行自增或自减时，如果 <code>key</code> 不存在，会被初始化为 <code>0</code> 再执行自增或自减操作。如果 <code>key</code> 值为非数字，那么会返回一个错误。数
字值的有效范围为 64 位(bit)有符号数字。</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">redis&gt; SET age <span style="color:#ae81ff">18</span>
OK
redis&gt; INCR age
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">19</span>
redis&gt; GET age
<span style="color:#e6db74">&#34;19&#34;</span>
redis&gt; DECR age
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">18</span>
redis&gt; INCRBY age <span style="color:#ae81ff">20</span>
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">38</span>
</code></pre></div><h3 id="incr">
  INCR
  <a class="anchor" href="#incr">#</a>
</h3>
<p>将 <code>key</code> 的值加 1。</p>
<h3 id="incrby">
  INCRBY
  <a class="anchor" href="#incrby">#</a>
</h3>
<p>将 <code>key</code> 的值增加指定的值。</p>
<h3 id="incrbyfloat">
  INCRBYFLOAT
  <a class="anchor" href="#incrbyfloat">#</a>
</h3>
<p>将 <code>key</code> 的值增加指定的浮点值。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">redis&gt; SET floatkey 9.5
OK
redis&gt; INCRBYFLOAT floatkey 0.1
<span style="color:#e6db74">&#34;9.6&#34;</span>
</code></pre></div><h3 id="decr">
  DECR
  <a class="anchor" href="#decr">#</a>
</h3>
<p>将 <code>key</code> 的值减 <code>1</code>。如果 <code>key</code> 不存在，</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">redis&gt; DECR count <span style="color:#75715e">#count 不存在，初始化为 0，再减一</span>
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> -1
</code></pre></div><h3 id="decrby">
  DECRBY
  <a class="anchor" href="#decrby">#</a>
</h3>
<p>将 <code>key</code> 的值减去指定的值。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">redis&gt; SET count <span style="color:#ae81ff">100</span>
OK
redis&gt; DECRBY count <span style="color:#ae81ff">20</span>
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">80</span>
</code></pre></div><h2 id="append">
  APPEND
  <a class="anchor" href="#append">#</a>
</h2>
<p>向 <code>key</code> 值字符串的末尾追加指定的 <code>value</code>；如果 <code>key</code> 不存在，则执行 <code>SET</code> 操作，设置 <code>key</code> 值</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">redis&gt; APPEND notexistkey hello
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">5</span>

redis&gt; APPEND notexistkey <span style="color:#e6db74">&#34; - redis&#34;</span>
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">13</span>

redis&gt; GET myphone
<span style="color:#e6db74">&#34;hello - redis&#34;</span>
</code></pre></div><h2 id="strlen">
  STRLEN
  <a class="anchor" href="#strlen">#</a>
</h2>
<p>返回 key 的值的长度。如果 <code>key</code> 不存在，则返回 <code>0</code>。果 key 的值不是字符串，则返回一个错误。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">redis&gt; SET existkey <span style="color:#e6db74">&#34;hello redis&#34;</span>
OK
redis&gt; STRLEN existkey
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">11</span>

redis&gt; STRLEN notexistkey
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">0</span>
</code></pre></div><h2 id="setrange">
  SETRANGE
  <a class="anchor" href="#setrange">#</a>
</h2>
<p>使用 <code>value</code> 覆盖 <code>key</code> 以偏移量 <code>offset</code> 开始的字符串。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">SETRANGE key offset value
</code></pre></div><p>如果 key 原来储存的字符串长度比偏移量小，那么原字符和偏移量之间的空白将用零字节(&quot;\x00&rdquo;)来填充。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 对非空字符串进行 SETRANGE</span>
redis&gt; SET greeting <span style="color:#e6db74">&#34;hello redis&#34;</span>
OK
redis&gt; SETRANGE greeting <span style="color:#ae81ff">6</span> <span style="color:#e6db74">&#34;Redis&#34;</span>
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">11</span>
redis&gt; GET greeting
<span style="color:#e6db74">&#34;hello Redis&#34;</span>

<span style="color:#75715e"># 对空字符串/不存在的 key 进行 SETRANGE</span>
redis&gt; EXISTS notexistkey
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">0</span>
redis&gt; SETRANGE notexistkey <span style="color:#ae81ff">5</span> <span style="color:#e6db74">&#34;Redis&#34;</span>
<span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">10</span>
redis&gt; GET notexistkey
<span style="color:#e6db74">&#34;\x00\x00\x00\x00\x00Redis&#34;</span>
</code></pre></div><h2 id="getrange">
  GETRANGE
  <a class="anchor" href="#getrange">#</a>
</h2>
<p><code>GETRANGE</code> 类似 <code>javascript</code> 中的 <code>substring</code>。提取字符串中两个指定的索引号之间的字符。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">GETRANGE key start end
</code></pre></div><p><code>start</code> 提取字符串的起始位置，<code>end</code> 为结束位置。
如果是负数，那么该参数声明从字符串的尾部开始算起的位置。也就是说，-1 指字符串中最后一个字符，-2 指倒数第二个字符，以此类推。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">redis&gt; SET greeting <span style="color:#e6db74">&#34;hello, redis&#34;</span>
OK

redis&gt; GETRANGE greeting <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">4</span>
<span style="color:#e6db74">&#34;hello&#34;</span>

<span style="color:#75715e"># 不支持回绕操作</span>
redis&gt; GETRANGE greeting -1 -5
<span style="color:#e6db74">&#34;&#34;</span>

redis&gt; GETRANGE greeting -3 -1
<span style="color:#e6db74">&#34;dis&#34;</span>

<span style="color:#75715e"># 从第一个到最后一个</span>
redis&gt; GETRANGE greeting <span style="color:#ae81ff">0</span> -1
<span style="color:#e6db74">&#34;hello, redis&#34;</span>

<span style="color:#75715e"># 取值范围超过实际字符串长度范围，会被自动忽略</span>
redis&gt; GETRANGE greeting <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1008611</span>
<span style="color:#e6db74">&#34;hello, redis&#34;</span>
</code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">



  <div><a class="flex align-center" href="https://github.com/shipengqi/db-learn/commit/391abafbb55e9e09f274b9823c6b411133314e4f" title='Last modified by shipengqi | June 17, 2020' target="_blank" rel="noopener">
      <img src="/db-learn/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>June 17, 2020</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/shipengqi/db-learn/edit/master/content//docs/redis/03_redis-string.md" target="_blank" rel="noopener">
      <img src="/db-learn/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>

</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#键值对存取">键值对存取</a>
      <ul>
        <li><a href="#set">SET</a></li>
        <li><a href="#setex">SETEX</a></li>
        <li><a href="#psetex">PSETEX</a></li>
        <li><a href="#setnx">SETNX</a></li>
        <li><a href="#get">GET</a></li>
        <li><a href="#getset">GETSET</a></li>
      </ul>
    </li>
    <li><a href="#批量操作键值对">批量操作键值对</a>
      <ul>
        <li><a href="#mset">MSET</a></li>
        <li><a href="#mget">MGET</a></li>
      </ul>
    </li>
    <li><a href="#自增自减">自增/自减</a>
      <ul>
        <li><a href="#incr">INCR</a></li>
        <li><a href="#incrby">INCRBY</a></li>
        <li><a href="#incrbyfloat">INCRBYFLOAT</a></li>
        <li><a href="#decr">DECR</a></li>
        <li><a href="#decrby">DECRBY</a></li>
      </ul>
    </li>
    <li><a href="#append">APPEND</a></li>
    <li><a href="#strlen">STRLEN</a></li>
    <li><a href="#setrange">SETRANGE</a></li>
    <li><a href="#getrange">GETRANGE</a></li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












